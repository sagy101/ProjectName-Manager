# Test info

- Name: Full Configuration Workflow >> should configure, run, verify terminals, and stop complete workflow
- Location: /Users/sashlag/projects/ProjectName-Manager/__tests__/e2e/full_configuration_workflow.e2e.spec.js:35:3

# Error details

```
Error: locator.waitFor: Application exited
Call log:
  - waiting for locator('.dropdown-item-list') to be visible

    at /Users/sashlag/projects/ProjectName-Manager/__tests__/e2e/full_configuration_workflow.e2e.spec.js:45:24
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 | const { launchElectron, waitForElement } = require('./test-helpers');
   3 |
   4 | const isMock = process.env.E2E_ENV === 'mock';
   5 | const config = isMock
   6 |   ? require('../mock-data/mockConfigurationSidebarSections.json')
   7 |   : require('../../src/configurationSidebarSections.json');
   8 |
   9 | const { sections, displaySettings } = config;
   10 |
   11 | // Helper function to find a section by its ID from the config
   12 | const getSectionById = (id) => sections.find(s => s.id === id);
   13 |
   14 | // Helper function to find a sub-section by its ID from the config
   15 | const getSubSectionById = (section, subSectionId) => {
   16 |     if (!section || !section.components.subSections) return null;
   17 |     return section.components.subSections.find(ss => ss.id === subSectionId);
   18 | };
   19 |
   20 | test.describe('Full Configuration Workflow', () => {
   21 |   let electronApp;
   22 |   let window;
   23 |
   24 |   test.beforeEach(async () => {
   25 |     const launchResult = await launchElectron();
   26 |     electronApp = launchResult.electronApp;
   27 |     window = launchResult.window;
   28 |     await window.waitForSelector('.config-container');
   29 |   });
   30 |
   31 |   test.afterEach(async () => {
   32 |     await electronApp.close();
   33 |   });
   34 |
   35 |   test('should configure, run, verify terminals, and stop complete workflow', async () => {
   36 |     // Phase 1: Wait for the app to be ready and select a global project
   37 |     const gcloudDropdownContainer = window.locator('.environment-header');
   38 |     const gcloudDropdown = gcloudDropdownContainer.locator('.dropdown-selector');
   39 |
   40 |     // Click to open the dropdown
   41 |     await gcloudDropdown.click();
   42 |
   43 |     // Wait for the options list to be visible, then click the first item
   44 |     const dropdownList = window.locator('.dropdown-item-list');
>  45 |     await dropdownList.waitFor({ state: 'visible', timeout: 15000 });
      |                        ^ Error: locator.waitFor: Application exited
   46 |     await dropdownList.locator('.dropdown-item').first().click();
   47 |
   48 |     // Verify a selection was made
   49 |     await expect(gcloudDropdown.locator('.selected-value')).not.toHaveText('Select project...', { timeout: 5000 });
   50 |
   51 |     // Phase 2: Enable and configure sections
   52 |     const sectionsToEnable = ['mirror', 'gopm', 'url-intelligence'];
   53 |     for (const sectionId of sectionsToEnable) {
   54 |       const sectionConfig = sections.find(s => s.id === sectionId);
   55 |       const sectionLocator = window.locator(`h2:has-text("${sectionConfig.title}")`).locator('..').locator('..');
   56 |       
   57 |       const mainToggle = sectionLocator.locator('input[type="checkbox"]').first();
   58 |       await mainToggle.check();
   59 |       await expect(mainToggle).toBeChecked();
   60 |
   61 |       // Special handling for the 'mirror' section to click 'attach'
   62 |       if (sectionId === 'mirror') {
   63 |         await window.waitForTimeout(500); // Give UI time to enable attach
   64 |         const attachToggle = sectionLocator.locator('#attach-mirror');
   65 |         await attachToggle.click();
   66 |         await expect(attachToggle).toHaveClass(/attached/);
   67 |       }
   68 |     }
   69 |
   70 |     // Phase 3: Run and verify terminals
   71 |     const runButton = window.locator('#run-configuration-button');
   72 |     await expect(runButton).toBeEnabled();
   73 |     await runButton.click();
   74 |
   75 |     // Verify that the correct tabs appear
   76 |     await expect(window.locator('.tab', { hasText: /Mirror \+ MariaDB/ })).toBeVisible({ timeout: 15000 });
   77 |     await expect(window.locator('.tab', { hasText: /gopm \(Container\)/ })).toBeVisible({ timeout: 15000 });
   78 |     await expect(window.locator('.tab.error-tab-button', { hasText: /URL Intelligence \+ TI \(Cloud\)/ })).toBeVisible({ timeout: 15000 });
   79 |     
   80 |     // Phase 4: Stop and verify
   81 |     const stopButton = window.locator('#run-configuration-button.stop');
   82 |     await expect(stopButton).toBeVisible();
   83 |     await stopButton.click();
   84 |
   85 |     // The tabs should be gone
   86 |     const terminalTabs = await window.locator('.tab');
   87 |     await expect(terminalTabs).toHaveCount(0, { timeout: 10000 });
   88 |   });
   89 |
   90 |   test('should handle individual section toggling during runtime', async () => {
   91 |     // Enable a section and run
   92 |     const gopmSection = sections.find(s => s.id === 'gopm');
   93 |     const gopmLocator = window.locator(`h2:has-text("${gopmSection.title}")`).locator('..').locator('..');
   94 |     await gopmLocator.locator('input[type="checkbox"]').first().check();
   95 |     
   96 |     await window.locator('#run-configuration-button').click();
   97 |     await expect(window.locator('.tab', { hasText: /gopm/i })).toBeVisible();
   98 |
   99 |     // Now, disable the section while it's "running"
  100 |     // The UI should prevent this, but we confirm the toggle is at least locked
  101 |     await expect(gopmLocator.locator('input[type="checkbox"]').first()).toBeDisabled();
  102 |   });
  103 |
  104 |   test('should validate deployment option changes affect configuration', async () => {
  105 |     const gopmSection = sections.find(s => s.id === 'gopm');
  106 |     const gopmLocator = window.locator(`h2:has-text("${gopmSection.title}")`).locator('..').locator('..');
  107 |     await gopmLocator.locator('input[type="checkbox"]').first().check();
  108 |
  109 |     // Initial run with default (container)
  110 |     await window.locator('#run-configuration-button').click();
  111 |     const gopmTab = window.locator('.tab', { hasText: /gopm \(Container\)/i });
  112 |     await expect(gopmTab).toBeVisible();
  113 |
  114 |     await window.locator('#run-configuration-button.stop').click();
  115 |     
  116 |     // Wait for stopping screen to appear and complete
  117 |     const stoppingScreen = window.locator('.stopping-status-overlay');
  118 |     await expect(stoppingScreen).toBeVisible({ timeout: 5000 });
  119 |
  120 |     // Wait for the screen to disappear on its own once processes are stopped
  121 |     await expect(stoppingScreen).not.toBeVisible({ timeout: 30000 });
  122 |
  123 |     // Change deployment option to process
  124 |     const processButton = gopmLocator.locator('[data-testid="mode-selector-btn-gopm-process"]');
  125 |     await expect(processButton).toBeEnabled({ timeout: 5000 });
  126 |     await processButton.click();
  127 |
  128 |     // Run again and verify new tab name
  129 |     await window.locator('#run-configuration-button').click();
  130 |     await expect(window.locator('.tab', { hasText: /gopm \(Process\)/i })).toBeVisible();
  131 |   });
  132 | }); 
```